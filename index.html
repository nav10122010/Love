<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Happy Birthday Ridhi üéÇ‚ú®</title>
<style>
  :root{
    --pink:#ff6b9f;
    --rose:#ff3e7f;
    --soft:#ffd6e7;
    --gold:#ffd86b;
    --deep:#1c1b29;
    --white:#fff;
    --glass: rgba(255,255,255,.14);
  }
  *{box-sizing:border-box; -webkit-tap-highlight-color:transparent}
  html,body{height:100%}
  body{
    margin:0; font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    color:#fff; background:
      radial-gradient(1200px 600px at 10% -10%, #ffb3c9 10%, transparent 60%),
      radial-gradient(900px 500px at 110% 10%, #b983ff 10%, transparent 60%),
      linear-gradient(160deg, #241b41 0%, #2f1f59 40%, #3c1a6b 100%);
    overflow-x:hidden;
  }

  /* floating balloons */
  .balloon{
    position:fixed; bottom:-15vh; width:42px; height:52px; border-radius:50%;
    background:linear-gradient(145deg, var(--soft), var(--pink));
    box-shadow: inset -8px -10px 18px #00000020, 0 8px 20px #00000040;
    animation: float 12s linear infinite;
    z-index:0; opacity:.9;
  }
  .balloon::after{
    content:""; position:absolute; left:50%; top:50px; width:2px; height:68px; background:#ffffff90;
  }
  @keyframes float{
    0%   {transform: translateY(0) translateX(0) rotate(0deg)}
    50%  {transform: translateY(-60vh) translateX(-10px) rotate(3deg)}
    100% {transform: translateY(-120vh) translateX(10px) rotate(-3deg)}
  }

  /* header */
  .wrap{position:relative; z-index:1; padding:32px 16px 80px; max-width:980px; margin:0 auto}
  h1{
    margin:8px 0 4px; font-size: clamp(30px, 7vw, 56px); font-weight:800; letter-spacing:.5px;
    text-shadow: 0 0 18px #ff4fa955, 0 0 40px #b983ff44;
  }
  .subtitle{
    margin:0 auto 18px; font-size: clamp(14px, 3.8vw, 18px); opacity:.92
  }

  .glass{
    background: var(--glass); backdrop-filter: blur(10px);
    border:1px solid #ffffff2a; box-shadow: 0 12px 40px #00000055, inset 0 0 0 1px #ffffff10;
    border-radius:24px; padding:18px;
  }

  .choices{display:flex; gap:14px; justify-content:center; flex-wrap:wrap; margin:18px 0 10px}
  .btn{
    background:#fff; color:#1b102b; border:none; border-radius:100px; padding:12px 18px;
    font-weight:700; cursor:pointer; transition:.2s transform, .2s box-shadow;
    box-shadow: 0 6px 18px #00000035;
  }
  .btn:active{transform:scale(.98)}
  .btn.pink{background:linear-gradient(135deg, #ffd6e7, #ffffff)}
  .btn.rose{background:linear-gradient(135deg, #ffe0ef, #fff0f6)}
  .btn-outline{
    background:transparent; color:#fff; border:1px solid #ffffff60; padding:10px 14px; border-radius:12px; font-weight:600;
  }

  .grid{display:grid; grid-template-columns:1fr; gap:18px; margin-top:12px}
  @media(min-width:920px){ .grid{grid-template-columns:1.05fr .95fr} }

  /* canvas card */
  .card{padding:18px}
  .card h2{margin:0 0 10px; font-size: clamp(20px, 4.8vw, 28px)}
  .hint{font-size:14px; opacity:.9; margin-bottom:12px}

  canvas{display:block; width:100%; height:auto; border-radius:16px; border:1px dashed #ffffff55; background: #2a2142}
  .success{display:none; margin-top:12px; padding:14px; border-radius:16px; background:#1d1633; border:1px solid #ffffff25}

  /* gift box */
  .gift-wrap{display:grid; place-items:center; padding:6px 0 4px}
  .gift{
    width:min(260px, 80vw); height:190px; position:relative; perspective:1200px; cursor:pointer;
  }
  .box{position:absolute; left:0; right:0; bottom:0; height:130px; border-radius:14px;
       background:linear-gradient(160deg,#fe71a7,#ff2f78); box-shadow: 0 16px 40px #00000060}
  .ribbon-vert{position:absolute; top:0; bottom:0; left:calc(50% - 12px); width:24px; background:#ffd86b80}
  .lid{
    position:absolute; left: -8px; right:-8px; top:-50px; height:70px; border-radius:14px;
    background:linear-gradient(160deg,#ff84b6,#ff2f78); transform-origin: 50% 100%;
    box-shadow: 0 18px 40px #00000070;
    transition: transform .8s cubic-bezier(.16,.8,.2,1), filter .3s;
  }
  .ribbon-hor{position:absolute; left:0; right:0; top:50%; height:20px; transform:translateY(-50%); background:#ffd86b90}

  .glow{position:absolute; inset:-18px; border-radius:20px; background: radial-gradient(60% 50% at 50% 0%, #fff6 0%, transparent 70%);
        opacity:0; transition:opacity .35s}

  .note{
    position:absolute; left:50%; bottom:20px; transform: translate(-50%, 0);
    width:90%; max-width:520px;
    background: #140e26e6; border:1px solid #ffffff2a; border-radius:18px;
    box-shadow: 0 16px 40px #00000070; padding:16px; line-height:1.55; display:none;
  }
  .note h3{margin:0 0 8px; font-size:20px}
  .note p{margin:6px 0}

  .footer{margin:26px auto 34px; text-align:center; opacity:.9; font-size:13px}

  /* confetti */
  .confetti{position:fixed; inset:0; pointer-events:none}

  /* header glow divider */
  .divider{
    height:1px; width:100%; margin:14px 0 18px; background:linear-gradient(90deg, transparent, #ffffff50, transparent)
  }
</style>
</head>
<body>

<!-- balloons (few instances with different delays/positions) -->
<div class="balloon" style="left:6vw; animation-delay:0s;"></div>
<div class="balloon" style="left:22vw; width:48px; height:58px; animation-delay:2s;"></div>
<div class="balloon" style="left:44vw; animation-delay:1s;"></div>
<div class="balloon" style="left:70vw; width:38px; height:48px; animation-delay:3s;"></div>
<div class="balloon" style="left:86vw; animation-delay:1.5s;"></div>

<canvas id="confetti" class="confetti"></canvas>

<div class="wrap">
  <div class="glass">
    <h1>Happy Birthday, Ridhi ‚ú®</h1>
    <p class="subtitle">Madam ji, aaj ka din sirf aapka hai ‚Äî thoda cake, thoda gift, aur bohot saari khushiyan üéâ</p>
    <div class="divider"></div>

    <div class="choices">
      <button class="btn pink" id="goCake">üç∞ Cut the Cake</button>
      <button class="btn rose" id="goGift">üéÅ Open the Gift</button>
      <button class="btn-outline" id="musicBtn">üéµ Play soft music</button>
    </div>

    <div class="grid">
      <!-- Cake Card -->
      <section class="card glass" id="cakeCard">
        <h2>üç∞ Drag to slice the cake</h2>
        <p class="hint">Apni ungli/Mouse ko cake par <b>drag</b> karo ‚Äî ek clean slice banao. Puri line ban jaaye toh cake khul ke ‚Äúcut‚Äù ho jayega!</p>
        <canvas id="cakeCanvas" width="520" height="520" aria-label="Birthday cake"></canvas>
        <div id="cakeSuccess" class="success">
          <b>Ridhi ‚ù§Ô∏è</b><br/>
          May your life always be sweet and peaceful like this slice.  
          Khushiyon ka yeh flavour kabhi kam na ho. Happy Birthday! ‚ú®
        </div>
      </section>

      <!-- Gift Card -->
      <section class="card glass" id="giftCard">
        <h2>üéÅ Tap to open your gift</h2>
        <p class="hint">Ek halka sa tap‚Ä¶ aur jadoo! Dhyaan se, lid khulegi aur andar se note chamkega ‚ú®</p>

        <div class="gift-wrap">
          <div class="gift" id="giftBox" aria-label="Gift for Ridhi">
            <div class="glow" id="giftGlow"></div>
            <div class="lid" id="giftLid">
              <div class="ribbon-hor"></div>
            </div>
            <div class="box">
              <div class="ribbon-vert"></div>
            </div>
          </div>
        </div>

        <div class="note" id="giftNote">
          <h3>For Ridhi, from the heart üíñ</h3>
          <p>Ridhi, tum meri duaon ka sabse khoobsurat hissa ho. Main tumse kuch nahi maangta ‚Äî bas tumhari muskaan hi meri duniya hai.</p>
          <p>Dooriyon ke bawajood, meri har soch tum tak hi aati hai. Tum meri kahani ka woh hissa ho jise main kabhi band nahi karna chahta.</p>
          <p>On your birthday, I wish you peace, growth, aur wo saari khushiyan jinki tum haqdaar ho. Shine always, more than all the stars ‚ú®</p>
          <p style="margin-top:10px; opacity:.9">‚Äî Always yours, <b>Nav</b></p>
        </div>
      </section>
    </div>

    <div class="footer">Made with ‚ù§Ô∏è, patience, and a lot of prayers ‚Äî by Nav</div>
  </div>
</div>

<!-- Audio (mobile auto-play may need a tap) -->
<audio id="bgm" loop preload="auto">
  <source src="https://cdn.pixabay.com/audio/2023/03/15/audio_c6b7d4fc8c.mp3" type="audio/mpeg" />
</audio>

<script>
/* =========================
   UTIL: Confetti Cannon
   ========================= */
(function(){
  const c = document.getElementById('confetti');
  const ctx = c.getContext('2d');
  let W = c.width = innerWidth, H = c.height = innerHeight, pieces=[];
  function spawn(n=120){
    for(let i=0;i<n;i++){
      pieces.push({
        x: Math.random()*W,
        y: -20-Math.random()*H*.2,
        w: 6+Math.random()*8,
        h: 8+Math.random()*10,
        vy: 2+Math.random()*4,
        vx: -1+Math.random()*2,
        rot: Math.random()*Math.PI*2,
        vr: -0.2+Math.random()*0.4,
        col: `hsl(${Math.random()*360},90%,60%)`,
        life: 200+Math.random()*120
      });
    }
  }
  function step(){
    ctx.clearRect(0,0,W,H);
    pieces = pieces.filter(p=>p.life>0);
    for(const p of pieces){
      p.x += p.vx; p.y += p.vy; p.rot += p.vr; p.life--;
      ctx.save();
      ctx.translate(p.x,p.y);
      ctx.rotate(p.rot);
      ctx.fillStyle = p.col;
      ctx.fillRect(-p.w/2,-p.h/2,p.w,p.h);
      ctx.restore();
    }
    requestAnimationFrame(step);
  }
  addEventListener('resize', ()=>{W=c.width=innerWidth;H=c.height=innerHeight;});
  step();
  // expose
  window.fireConfetti = (power=1)=> spawn(120*power);
})();

/* ============================================
   MUSIC BUTTON (autoplay needs user gesture)
   ============================================ */
const musicBtn = document.getElementById('musicBtn');
const bgm = document.getElementById('bgm');
let musicOn = false;
musicBtn.addEventListener('click', async ()=>{
  try{
    if(!musicOn){ await bgm.play(); musicOn=true; musicBtn.textContent="‚è∏Ô∏è Pause music"; }
    else{ bgm.pause(); musicOn=false; musicBtn.textContent="üéµ Play soft music"; }
  }catch(e){ alert("If music didn't start, tap again once."); }
});

/* =========================
   NAV BUTTONS (scroll)
   ========================= */
document.getElementById('goCake').onclick = ()=> document.getElementById('cakeCard').scrollIntoView({behavior:'smooth', block:'center'});
document.getElementById('goGift').onclick = ()=> document.getElementById('giftCard').scrollIntoView({behavior:'smooth', block:'center'});

/* ============================================
   INTERACTIVE CAKE (Canvas + Drag-to-cut)
   ============================================ */
(function(){
  const canvas = document.getElementById('cakeCanvas');
  const ctx = canvas.getContext('2d');
  const W = canvas.width, H = canvas.height;
  const cx = W/2, cy = H/2, R = 170;

  // Draw pretty cake (layers + top frosting + candles)
  function drawCake(baseCtx){
    baseCtx.clearRect(0,0,W,H);
    // plate
    baseCtx.save();
    baseCtx.translate(cx, cy+R+28);
    baseCtx.scale(1.8, 0.5);
    gradientEllipse(baseCtx, -80,-18,160,36, '#ffffff10','#ffffff35');
    baseCtx.restore();

    // layers
    roundCakeLayer(baseCtx, cx, cy+46, R+8, '#7b3f00'); // shadow layer
    roundCakeLayer(baseCtx, cx, cy+40, R, '#9b5e2e');   // chocolate
    dripIcing(baseCtx, cx, cy-10, R-6, '#ffd6e7', '#ff9fc3');

    // sprinkles
    for(let i=0;i<120;i++){
      const a = Math.random()*Math.PI*2;
      const r = (R-30) * Math.sqrt(Math.random());
      const x = cx + r*Math.cos(a);
      const y = cy-16 + r*Math.sin(a);
      baseCtx.fillStyle = `hsl(${Math.random()*360},90%,70%)`;
      baseCtx.fillRect(x, y, 3, 6);
    }

    // candles
    const n=5;
    for(let i=0;i<n;i++){
      const a = (-.8 + i*(1.6/(n-1))) * Math.PI/2;
      const rx = cx + (R-58)*Math.cos(a);
      const ry = cy-26 + (R-58)*Math.sin(a);
      candle(baseCtx, rx, ry, 36, i%2? '#ffd86b' : '#8ad8ff');
    }

    // top gloss
    baseCtx.beginPath();
    baseCtx.fillStyle = '#ffffff18';
    baseCtx.ellipse(cx-36, cy-22, 80, 36, -0.35, 0, Math.PI*2);
    baseCtx.fill();

    // greeting
    baseCtx.font = "700 24px ui-sans-serif, system-ui, -apple-system";
    baseCtx.fillStyle = "#fff";
    baseCtx.textAlign="center";
    baseCtx.fillText("Happy Birthday", cx, cy-72);
    baseCtx.fillStyle = "#ffe7f3";
    baseCtx.fillText("Ridhi", cx, cy-44);
  }

  function roundCakeLayer(c, x, y, r, col){
    c.save();
    c.fillStyle = col;
    c.beginPath(); c.arc(x,y, r, 0, Math.PI*2); c.fill();
    c.restore();
  }
  function dripIcing(c, x, y, r, col, edge){
    c.save();
    // top disc
    c.fillStyle = col;
    c.beginPath(); c.arc(x,y, r, 0, Math.PI*2); c.fill();
    // rim
    c.strokeStyle = edge; c.lineWidth = 10; c.beginPath(); c.arc(x,y, r-4, 0, Math.PI*2); c.stroke();
    // drips
    for(let i=0;i<20;i++){
      const ang = Math.random()*Math.PI*2;
      const len = 18 + Math.random()*24;
      const ex = x + (r-6)*Math.cos(ang);
      const ey = y + (r-6)*Math.sin(ang);
      c.strokeStyle = col; c.lineWidth = 10; c.lineCap="round";
      c.beginPath(); c.moveTo(ex,ey);
      c.lineTo(ex + Math.cos(ang)*6, ey + Math.sin(ang)*6 + len);
      c.stroke();
    }
    c.restore();
  }
  function candle(c, x, y, h, col){
    c.save();
    // body
    c.fillStyle = col;
    c.fillRect(x-6, y-h, 12, h);
    // stripes
    c.strokeStyle = '#00000015'; c.lineWidth=2;
    for(let i=0;i<h; i+=6){ c.beginPath(); c.moveTo(x-6, y-h+i); c.lineTo(x+6, y-h+i); c.stroke(); }
    // flame
    c.beginPath();
    c.fillStyle = '#ffeb99';
    c.moveTo(x, y-h-18);
    c.quadraticCurveTo(x+10, y-h-6, x, y-h);
    c.quadraticCurveTo(x-10, y-h-6, x, y-h-18);
    c.fill();
    c.globalAlpha=.7; c.fillStyle="#ff9f1a"; c.beginPath(); c.arc(x, y-h-10, 4, 0, Math.PI*2); c.fill(); c.globalAlpha=1;
    c.restore();
  }
  function gradientEllipse(c, x,y,w,h, a,b){
    const grd = c.createLinearGradient(x,y, x+w,y+h);
    grd.addColorStop(0,a); grd.addColorStop(1,b);
    c.fillStyle = grd; c.beginPath(); c.ellipse(0,0,0,0,0,0,0); // noop to reset subpath
    c.fillRect(x,y,w,h);
  }

  // Draw initial cake on an offscreen canvas so we can split it later
  const base = document.createElement('canvas'); base.width=W; base.height=H;
  drawCake(base.getContext('2d'));
  ctx.drawImage(base,0,0);

  // Cutting logic
  let cutting=false, path=[];
  const lineCanvas = document.createElement('canvas'); lineCanvas.width=W; lineCanvas.height=H;
  const lctx = lineCanvas.getContext('2d');

  function pointerPos(e){
    const rect = canvas.getBoundingClientRect();
    const cx = (e.touches? e.touches[0].clientX : e.clientX) - rect.left;
    const cy = (e.touches? e.touches[0].clientY : e.clientY) - rect.top;
    return {x: cx * (canvas.width/rect.width), y: cy * (canvas.height/rect.height)};
  }
  function inCake(p){ const dx=p.x-cx, dy=p.y-cy; return Math.hypot(dx,dy) <= R+6; }

  function startCut(e){
    cutting = true; path=[pointerPos(e)];
    drawOverlay();
  }
  function moveCut(e){
    if(!cutting) return;
    const p = pointerPos(e);
    path.push(p);
    drawOverlay();
    e.preventDefault();
  }
  function endCut(){
    if(!cutting) return;
    cutting=false;
    // evaluate: if line crosses the cake and is long enough and roughly straight
    if(validSlice(path)){
      animateSplit(path);
      document.getElementById('cakeSuccess').style.display='block';
      fireConfetti(1.2);
    }
    // clear overlay after slight delay
    setTimeout(()=>{ lctx.clearRect(0,0,W,H); drawOverlay(); }, 500);
  }

  function drawOverlay(){
    // redraw base + overlay line
    ctx.clearRect(0,0,W,H);
    ctx.drawImage(base,0,0);
    // overlay line
    lctx.clearRect(0,0,W,H);
    if(path.length>1){
      lctx.strokeStyle = '#ffd86b';
      lctx.lineWidth = 8;
      lctx.lineCap = 'round';
      lctx.shadowColor = '#ffd86b';
      lctx.shadowBlur = 14;
      lctx.beginPath();
      lctx.moveTo(path[0].x, path[0].y);
      for(let i=1;i<path.length;i++) lctx.lineTo(path[i].x, path[i].y);
      lctx.stroke();
    }
    ctx.drawImage(lineCanvas,0,0);
  }

  // validate slice: line should enter and exit the cake and be reasonably straight
  function validSlice(pts){
    if(pts.length<8) return false;
    let insideCount=0;
    for(const p of pts){ if(inCake(p)) insideCount++; }
    if(insideCount<6) return false;

    // compute best-fit line by two extreme points
    const firstIn = pts.find(inCake);
    const lastIn  = [...pts].reverse().find(inCake);
    if(!firstIn || !lastIn) return false;
    const len = Math.hypot(lastIn.x-firstIn.x, lastIn.y-firstIn.y);
    if(len < R*0.8) return false; // needs to be long enough

    // must cross near center region (so it's a real slice)
    const distToCenter = pointLineDistance({x:cx,y:cy}, firstIn, lastIn);
    return distToCenter < 40; // within 40px of center
  }
  function pointLineDistance(p, a, b){
    const A = p.x - a.x, B = p.y - a.y, C = b.x - a.x, D = b.y - a.y;
    const dot = A*C + B*D;
    const len_sq = C*C + D*D;
    let param = dot / len_sq;
    if (param < 0 || isNaN(param)) param = 0;
    else if (param > 1) param = 1;
    const xx = a.x + param * C, yy = a.y + param * D;
    const dx = p.x - xx, dy = p.y - yy;
    return Math.hypot(dx,dy);
  }

  // split animation: create two masks along cut line and slide apart
  function animateSplit(pts){
    const A = pts.find(inCake), B = [...pts].reverse().find(inCake);
    if(!A||!B) return;

    // unit normal to the cut line
    const vx = B.x-A.x, vy = B.y-A.y;
    const mag = Math.hypot(vx,vy) || 1;
    const nx = -vy/mag, ny = vx/mag; // normal vector

    // create two masked images
    const leftC = document.createElement('canvas'); leftC.width=W; leftC.height=H;
    const rightC= document.createElement('canvas'); rightC.width=W; rightC.height=H;
    const l = leftC.getContext('2d'), r = rightC.getContext('2d');

    // helper to clip half-plane
    function clipHalf(ctx, sign){
      ctx.save();
      ctx.beginPath();
      // big polygon covering half plane
      const M = 4000;
      // line through midpoint; use normal to decide side
      const mx = (A.x+B.x)/2, my = (A.y+B.y)/2;
      // direction along cut
      const tx = vx/mag, ty = vy/mag;
      // half-plane points
      ctx.moveTo(mx + tx*M + nx*sign*M, my + ty*M + ny*sign*M);
      ctx.lineTo(mx - tx*M + nx*sign*M, my - ty*M + ny*sign*M);
      ctx.lineTo(mx - tx*M - nx*sign*M, my - ty*M - ny*sign*M);
      ctx.lineTo(mx + tx*M - nx*sign*M, my + ty*M - ny*sign*M);
      ctx.closePath();
      ctx.clip();
      ctx.drawImage(base,0,0);
      ctx.restore();
    }
    clipHalf(l, +1); // one side
    clipHalf(r, -1); // other side

    // animate apart
    let t=0; const dur=28;
    (function step(){
      ctx.clearRect(0,0,W,H);
      // slide halves in opposite directions along normal
      const off = easeOutCubic(Math.min(t/dur,1)) * 36;
      ctx.save(); ctx.translate(nx*off, ny*off); ctx.drawImage(leftC,0,0); ctx.restore();
      ctx.save(); ctx.translate(-nx*off, -ny*off); ctx.drawImage(rightC,0,0); ctx.restore();
      t++;
      if(t<=dur) requestAnimationFrame(step);
    })();
  }
  function easeOutCubic(x){return 1 - Math.pow(1 - x, 3);}

  // pointer events
  const opts = {passive:false};
  canvas.addEventListener('pointerdown', startCut, opts);
  canvas.addEventListener('pointermove', moveCut, opts);
  addEventListener('pointerup', endCut, opts);
  addEventListener('pointercancel', endCut, opts);
})();

/* ============================================
   GIFT BOX: tap to open ‚Üí glow + note + confetti
   ============================================ */
(function(){
  const lid = document.getElementById('giftLid');
  const glow = document.getElementById('giftGlow');
  const note = document.getElementById('giftNote');
  const box  = document.getElementById('giftBox');
  let opened = false;

  box.addEventListener('click', ()=>{
    if(opened) return;
    opened = true;
    lid.style.transform = 'rotateX(150deg)';
    lid.style.filter = 'brightness(1.15)';
    glow.style.opacity = 1;
    setTimeout(()=>{ note.style.display='block'; note.scrollIntoView({behavior:'smooth', block:'center'}); }, 350);
    fireConfetti(1.3);
  });
})();

</script>
</body>
</html>